name: Update AoC Badges
on:
  #push:                                     
  #  branches:
  #   - main
    
  workflow_dispatch:                             
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2                # clones your repo
      - uses: actions/setup-python@v2
        with:
          python-version: "3.10" # Version range or exact version of a Python version to use, using SemVer's version range syntax
          architecture: "x64" # optional x64 or x86. Defaults to x64 if not specified}

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pipenv
          pipenv install --system --deploy
          
      - name: Get stars
        env:
          SESSION_ID: "${{ secrets.SESSION_ID}}"
        run: python scrc/get_stars.py
        
      - uses: stefanzweifel/git-auto-commit-action@v4     # Step that pushes these local changes back to your github repo
        with:
          commit_message: Update badges
          file_pattern: README.md
